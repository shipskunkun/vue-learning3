### 9 简单轮子：Toast 组件 6 视频

先自己想想需求分析：

1. 展示文字

2. 展示不同状态的文字，错误、提示、正常

3. 点击消失

4. 保证弹出 唯一性

   

没想到的

1. 弹出的位置
2. 点击关闭后，回调函数



1. 关闭

   1. 没有关闭按钮

      利用setTimeout 解决

      如何移除元素？

      ​	this.$ref.remove() 使用 dom 原生方法？？？ html 中没有 dom 方法。

      思路一：

      ​	通过v-if

      思路二：

      ​	找到上层元素，removeChild

      ​	自己试了试，必须要要有 $parent, 这种方法可行

      ```vue
      <div ref="testP">
        <div class="test" ref="test">lala</div>
      </div>
      
      this.$refs.testP.removeChild(this.$refs.test)
      ```

      原生dom，更简单：

      ```js
      	this.$refs.test.parentElement.removeChild(this.$refs.test)
      ```

         parentElement 和 parentNode 区别

      **第一点：**parentNode跟parentElement，前者是w3c标准，后者只ie支持

      parentElement是ie专用的，就是说在firefox(ff)浏览器里是不能使用的，一般情况parentNode可以取代parentElement的所有功能。

      **第二点：**

      parentElement匹配的是parent为element的情况，而parentNode匹配的则是parent为node的情况。element是包含在node里的，它的nodeType是1。

      ```
      window.onload=function(){
               alert(document.body.parentNode.parentNode)
      }
      
      window.onload=function(){
              alert(document.body.parentElement.parentElement)
      }
      ```

      理论上，应该返回"document"节点（node）,但是它不是element对象，因此前面的代码返回object，而后面的代码返回null。

      

      html原生方法：

      ```js
if(this.parentNode){
      	this.parentNode.removeChild(this);
      }
      ```
      
      

   2. 有关闭按钮

      1. 传入数据？
      1. button Text 按钮文案
         2. 关闭 callback
   
2. 渲染
   1. 如何渲染html?  如果传入的是 html 的话。
   2. 

3. 确保弹出唯一性
   
   1. 通过v-if 即可。



**review：**

难点：

如何自动设置弹框高度，通过 getBoundingClientRect().height

是否自动关闭，默认5秒自动关闭，接受 number 和 false，true。 number 表示几秒后消失